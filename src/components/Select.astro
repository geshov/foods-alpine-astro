<div x-data="select">
  <h1 class="text-2xl text-center font-semibold mb-4">Меню</h1>

  <template x-for="dish in select" :key="dish.slug">
    <div>
      <div class="flex justify-between items-center gap-4">
        <div x-text="dish.data.name"></div>
        <button
          @click="$store.global.toggleSelect(dish)"
          class="btn btn-sm btn-square btn-outline"
        >
          <box-icon name="minus" class="fill-current"></box-icon>
        </button>
      </div>
      <div class="divider my-1"></div>
    </div>
  </template>

  <div x-show="!select.length" class="text-center">Блюда не выбраны.</div>
</div>

<script is:inline>
  document.addEventListener("alpine:init", () => {
    Alpine.data("select", () => ({
      get select() {
        return Alpine.store("global").recipes.filter((dish) =>
          Alpine.store("global").select.includes(dish.slug)
        );
      },
    }));
  });
</script>
